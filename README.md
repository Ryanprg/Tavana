# توان‌مارکت

## نمای کلی پروژه
- **نام**: توان‌مارکت
- **هدف**: ایجاد بازار آنلاین محصولات و خدمات تولیدشده توسط توان‌یابان با تمرکز بر فروش عادلانه، تجربه کاربری مدرن و رشد سئو.
- **ویژگی‌های کلیدی**:
  - فروشگاه محصولات و خدمات
  - پنل فروشنده و پنل مدیریت
  - وبلاگ سئو محور
  - دسته‌بندی هوشمند محصولات و مشاوره خرید با AI
  - جستجوی پیشرفته و فیلتر
  - لیست علاقه‌مندی
  - کاملاً ریسپانسیو و بهینه برای موتورهای جستجو

## مسیرهای اصلی (Entry URIs)
| مسیر | توضیح |
|------|-------|
| `/` | صفحه خانه |
| `/shop` | فروشگاه و فیلتر محصولات |
| `/blog` | وبلاگ |
| `/blog/:slug` | صفحه مقاله |
| `/seller` | پنل فروشنده |
| `/admin` | پنل مدیریت |
| `/auth` | ورود و ثبت‌نام |
| `/sitemap.xml` | نقشه سایت |
| `/robots.txt` | ربات‌ها |
| `/api/ai/categorize` | API دسته‌بندی هوشمند |
| `/api/ai/advice` | API مشاوره محصول |
| `/api/products` | دریافت محصولات از D1 |
| `/api/auth/register` | ثبت‌نام کاربر |
| `/api/auth/login` | ورود و دریافت توکن |
| `/api/auth/me` | دریافت اطلاعات کاربر از توکن |
| `/api/insights` | داده نمونه اینسایت |
| `/api/health` | وضعیت سرویس |

## معماری داده
- **مدل‌ها**: کاربران، فروشندگان، محصولات، سفارش‌ها، مقالات وبلاگ
- **ذخیره‌سازی**: Cloudflare D1 (SQLite)
- **فایل مهاجرت**: `migrations/0001_initial_schema.sql`

## راهنمای استفاده
1. وارد صفحه فروشگاه شوید و محصولات را مشاهده کنید.
2. از بخش فیلترها و جستجو برای پیدا کردن سریع محصول استفاده کنید.
3. در صفحه خانه از بخش مشاوره هوشمند برای دریافت پیشنهاد محصول کمک بگیرید.
4. فروشندگان می‌توانند در پنل فروشنده، محصول جدید ثبت و از دسته‌بندی هوشمند استفاده کنند.
5. مدیر سایت از پنل مدیریت برای مشاهده اینسایت‌ها و تنظیمات اولیه استفاده می‌کند.

## هوش مصنوعی
- به صورت پیش‌فرض از پاسخ‌های محلی استفاده می‌شود.
- برای اتصال به Hugging Face Inference API متغیرهای زیر را تنظیم کنید:
  - `HF_API_TOKEN`
  - `HF_MODEL` (پیش‌فرض: `Qwen/Qwen2.5-7B-Instruct`)

## احراز هویت
- ثبت‌نام و ورود به کمک D1 و رمزنگاری PBKDF2 پیاده‌سازی شده است.
- برای امضای JWT باید متغیر زیر تنظیم شود:
  - `AUTH_SECRET`

## راه‌اندازی D1
1. ایجاد دیتابیس تولید:
   ```bash
   npx wrangler d1 create webapp-production
   ```
2. مقدار `database_id` خروجی را در `wrangler.jsonc` قرار دهید.
3. اجرای مهاجرت‌ها در لوکال:
   ```bash
   npm run db:migrate:local
   ```
4. اجرای پروژه با دیتابیس لوکال:
   ```bash
   npm run dev:d1
   ```

## وضعیت پیاده‌سازی
- **پیاده‌سازی شده**:
  - صفحات اصلی فروشگاه، پنل فروشنده، پنل مدیریت، وبلاگ
  - سئو پایه (متا تگ‌ها، نقشه سایت، robots)
  - فرم‌های مشاوره هوشمند و دسته‌بندی هوشمند (MVP)
  - اتصال D1 و جدول‌های پایه
  - ثبت‌نام و ورود API + صفحه ورود/ثبت‌نام
  - طراحی ریسپانسیو مینیمال
- **پیاده‌سازی نشده**:
  - سبد خرید و پرداخت واقعی
  - مدیریت نقش‌ها و دسترسی‌های دقیق در UI
  - اتصال به درگاه زرین‌پال

## گام‌های پیشنهادی بعدی
1. اتصال به زرین‌پال و مدیریت چند درگاه از پنل مدیریت.
2. تکمیل داشبورد اینسایت با داده واقعی.
3. افزودن سیستم تیکت پشتیبانی.
4. ساخت پنل پروفایل کاربر و سفارش‌ها.

## استقرار
- **پلتفرم**: Cloudflare Pages
- **وضعیت**: ❌ هنوز مستقر نشده
- **پشته فنی**: Hono + TypeScript + Tailwind (CDN)

## آدرس‌ها
- **Production**: بعد از استقرار ثبت می‌شود.
